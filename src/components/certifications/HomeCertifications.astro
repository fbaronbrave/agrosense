---
import { t } from "i18next";

import Title from "../shared/Title.astro";
import CertificationCard from "./CertificationCard.astro";
---

<section class="space-y-10 certifications-section">
  <Title
    title={t("home.certifications.title")}
    subtitle={String(t("home.certifications.subtitle"))}
  />
  <!-- <div class="grid sm:grid-cols-2 lg:grid-cols-7 gap-10 certifications-section-content">
    <CertificationCard
      className="lg:col-span-4"
      title={t("home.certifications.items.0.title")}
      description={t("home.certifications.items.0.description")}
      image={String(t("home.certifications.items.0.image"))}
    />
    <CertificationCard
      className="lg:col-span-3"
      title={t("home.certifications.items.1.title")}
      description={t("home.certifications.items.1.description")}
      image={String(t("home.certifications.items.1.image"))}
    />
    <CertificationCard
      className="lg:col-span-3"
      title={t("home.certifications.items.2.title")}
      description={t("home.certifications.items.2.description")}
      image={String(t("home.certifications.items.2.image"))}
    />
    <CertificationCard
      className="lg:col-span-4"
      title={t("home.certifications.items.3.title")}
      description={t("home.certifications.items.3.description")}
      image={String(t("home.certifications.items.3.image"))}
    />
  </div> -->
  <div
    class="grid grid-cols-1 lg:grid-cols-3 gap-10 certifications-section-content"
  >
    <CertificationCard
      className="!grid-cols-1 !grid-rows-2 mx-auto max-w-xl"
      title={t("home.certifications.items.0.title")}
      description={t("home.certifications.items.0.description")}
      image={String(t("home.certifications.items.0.image"))}
    />

    <CertificationCard
      className="!grid-cols-1 !grid-rows-2 mx-auto max-w-xl"
      title={t("home.certifications.items.1.title")}
      description={t("home.certifications.items.1.description")}
      image={String(t("home.certifications.items.1.image"))}
    />
    <CertificationCard
      className="!grid-cols-1 !grid-rows-2 mx-auto max-w-xl"
      title={t("home.certifications.items.2.title")}
      description={t("home.certifications.items.2.description")}
      image={String(t("home.certifications.items.2.image"))}
    />
    <!-- <CertificationCard
      className="!grid-cols-1 !grid-rows-2 mx-auto max-w-xl"
      title={t("home.certifications.items.3.title")}
      description={t("home.certifications.items.3.description")}
      image={String(t("home.certifications.items.3.image"))}
    /> -->
  </div>
</section>

<script>
  const section = document.querySelector(".certifications-section");
  const content = section?.querySelector(".certifications-section-content");
  const title = section?.querySelector(".title-section");

  if (section && content && title) {
    const children = content.children as unknown as HTMLElement[];
    Array.from(children).forEach((child, index) => {
      child.style.animationDelay = `${(index + 1) * 0.1}s`;
    });

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            title.classList.add("animate-fade-in-up");
            title.classList.remove("animate-fade-out-up");
            Array.from(children).forEach((child) => {
              child.classList.add("animate-fade-in-up");
              child.classList.remove("animate-fade-out-up");
            });
          } else {
            title.classList.remove("animate-fade-in-up");
            title.classList.add("animate-fade-out-up");

            Array.from(children).forEach((child) => {
              child.classList.remove("animate-fade-in-up");
              child.classList.add("animate-fade-out-up");
            });
          }
        });
      },
      { threshold: 0.25, rootMargin: "0px 0px -25% 0px" }
    );

    observer.observe(section);
  }
</script>
